@startuml findStudentsBySpecification

actor Admin
participant "UserServiceImpl" as UserService
participant "UserRepository" as UserRepository
participant "UserSpecification" as UserSpec

== Find Students by Specification ==
Admin -> UserService: findStudentsBySpecification(name, searchStartDate, searchEndDate, page, size)
activate UserService

UserService -> UserService: create Pageable (PageRequest.of(page, size))
UserService -> UserSpec: hasRole(RoleEnum.STUDENT)
activate UserSpec
UserSpec --> UserService: Specification<User>
deactivate UserSpec

UserService -> UserSpec: hasName(name)
activate UserSpec
UserSpec --> UserService: Specification<User>
deactivate UserSpec

UserService -> UserSpec: hasDateRange(searchStartDate, searchEndDate)
activate UserSpec
UserSpec --> UserService: Specification<User>
deactivate UserSpec

UserService -> UserRepository: findAll(spec, pageable)
activate UserRepository
UserRepository --> UserService: Page<User>
deactivate UserRepository

UserService -> UserService: convertToDTO(userPage)
activate UserService
UserService --> UserService: List<UserDTO>
deactivate UserService

UserService --> Admin: Page<UserDTO>
deactivate UserService

@enduml
