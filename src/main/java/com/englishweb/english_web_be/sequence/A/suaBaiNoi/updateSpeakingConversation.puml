@startuml updateSpeakingConversation

actor Teacher
participant "SpeakingConversationServiceImpl" as SpeakingConversationService
participant "BaseServiceImpl" as BaseService
participant "SpeakingConversationRepository" as Repository

== Lược đồ tuần tự chức năng chỉnh sửa cuộc hội thoại của bài học nói==
Teacher -> SpeakingConversationService: update(dto, id)
activate SpeakingConversationService

SpeakingConversationService -> SpeakingConversationService: isSerialUnique(dto.getSpeakingId(), dto.getSerial(), id, repository)
SpeakingConversationService -> BaseService: update(dto, id) << Inherited from Parent >>
activate BaseService

BaseService -> BaseService: isExist(id)
BaseService -> SpeakingConversationService: convertToEntity(dto) << Overridden >>
activate SpeakingConversationService
SpeakingConversationService -> SpeakingConversationService: convertToEntity(dto)
SpeakingConversationService --> BaseService: SpeakingConversationEntity
deactivate SpeakingConversationService

BaseService -> Repository: save(updatedEntity)
activate Repository
Repository --> BaseService: Updated SpeakingConversationEntity
deactivate Repository

BaseService -> SpeakingConversationService: convertToDTO(updatedEntity) << Overridden >>
activate SpeakingConversationService
SpeakingConversationService -> SpeakingConversationService: convertToDTO(updatedEntity)
SpeakingConversationService --> BaseService: Updated SpeakingConversationDTO
deactivate SpeakingConversationService

BaseService --> SpeakingConversationService: Updated SpeakingConversationDTO
deactivate BaseService

SpeakingConversationService --> Teacher: Updated SpeakingConversationDTO
deactivate SpeakingConversationService

@enduml
