@startuml CreateListenAndWriteAWord

actor User
participant "ListenAndWriteAWordServiceImpl" as LWS
participant "ListenAndWriteAWordRepository" as LWR
participant "BaseServiceImpl" as BSI

== Create ListenAndWriteAWord ==
User -> LWS: create(dto)
activate LWS

LWS -> LWS: Check if serial is unique
alt Serial not unique
    LWS --> User: Throw DataIntegrityViolationException
    deactivate LWS
else Serial unique
    LWS -> BSI: Call super.create(dto)
    note right: Gọi hàm create từ BaseServiceImpl
    BSI -> LWS: Call convertToEntity(dto)
    note right: convertToEntity được định nghĩa trong BaseServiceImpl\nvà triển khai trong ListenAndWriteAWordServiceImpl
    LWS --> BSI: ListenAndWriteAWord entity

    BSI -> LWR: Save ListenAndWriteAWord entity
    activate LWR
    LWR --> BSI: Saved entity
    deactivate LWR

    BSI -> LWS: Call convertToDTO(saved entity)
    LWS --> BSI: ListenAndWriteAWordDTO
end

LWS --> User: Return ListenAndWriteAWordDTO
deactivate LWS

@enduml
