@startuml FindByListeningId

actor User
participant "ListenAndWriteAWordServiceImpl" as LWS
participant "ListenAndWriteAWordRepository" as LWR
participant "ListeningServiceImpl" as LS
participant "BaseServiceImpl" as BSI

== Find All Words By Listening ID ==
User -> LWS: findByListeningId(listeningId)
activate LWS

LWS -> LS: isExist(listeningId)
activate LS
LS --> LWS: Listening exists
deactivate LS

LWS -> LWR: Find all words by listeningId
activate LWR
LWR --> LWS: List of ListenAndWriteAWord entities
deactivate LWR

loop Convert each entity to DTO
    LWS -> BSI: Call super.convertToDTO(entity)
    note right: convertToDTO được định nghĩa trong BaseServiceImpl\nvà triển khai trong ListenAndWriteAWordServiceImpl
end

LWS --> User: Return list of ListenAndWriteAWordDTO
deactivate LWS

@enduml
