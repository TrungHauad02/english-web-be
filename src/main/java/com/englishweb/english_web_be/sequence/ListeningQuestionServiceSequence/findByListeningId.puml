@startuml FindByListeningId

actor User
participant "ListeningQuestionServiceImpl" as LQS
participant "ListeningQuestionRepository" as LQR
participant "ListeningServiceImpl" as LS
participant "BaseServiceImpl" as BSI

== Find All Questions By Listening ID ==
User -> LQS: findByListeningId(listeningId)
activate LQS

LQS -> LS: isExist(listeningId)
activate LS
LS --> LQS: Listening exists
deactivate LS

LQS -> LQR: Find all questions by listeningId
activate LQR
LQR --> LQS: List of ListeningQuestion entities
deactivate LQR

loop Convert each entity to DTO
    LQS -> BSI: Call super.convertToDTO(entity)
    note right: convertToDTO được định nghĩa trong BaseServiceImpl\nvà triển khai trong ListeningQuestionServiceImpl
end

LQS --> User: Return list of ListeningQuestionDTO
deactivate LQS

@enduml
